---
title: 共价大爷游长沙
date: 2020-07-17 13:46:00
tags: 
- 数据结构
- LCT
categories:
- 数据结构
- LCT
mathjax: true
---

先膜毛爷爷。

# 题目描述

[UOJ#207. 共价大爷游长沙](https://uoj.ac/problem/207)

给出一棵动态的树，有一个集合 $S$，每次询问集合中的所有点相连的路径是否一定经过 $(x, y)$。

四种操作：
- $\text{opt} = 1, x, y, u, v$：删除边 $(x, y)$，增加边 $(u, v)$；
- $\text{opt} = 2, x, y$：在集合 $S$ 中加入 $(x, y)$；
- $\text{opt} = 3, x$：删除第 $x$ 个加入集合 $S$ 的点对；
- $\text{opt} = 4, x, y$：询问集合中的所有点相连的路径是否一定经过 $(x, y)$。

|测试点编号|$n$|$m$|$\text{type}$|限制|
|--|--|--|--|--|
|1|$n \le 100$|$m \le 100$|1, 2, 3, 4||
|2, 3|$n \le 100000$|$m \le 300000$|2, 4||
|4, 5|||2, 3, 4||
|6, 7|||1, 2, 3, 4|$\mid S\mid \le 10$|
|8, 9, 10|||1, 2, 3, 4||

# 题解

对于测试点 1，可以暴力。可以用一个 set 维护边的信息，对于加边删边直接用 set 的 insert 和 erase，每次暴力遍历 s 中的所有点对走一遍看是否经过边 $(x, y)$。
